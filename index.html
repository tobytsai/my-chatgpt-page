<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>裱框費用計算</title>
  <style>
    body{margin:0;font-family:system-ui,-apple-system,"Noto Sans TC",Arial;background:#f6f7fb;color:#111}
    .wrap{max-width:560px;margin:0 auto;padding:14px 12px 28px}
    .card{background:#fff;border-radius:18px;padding:16px;box-shadow:0 10px 28px rgba(0,0,0,.08)}
    h1{font-size:1.2rem;margin:6px 0 12px}
    .sub{font-size:.9rem;color:#555;line-height:1.45;margin-bottom:14px}
    label{display:block;margin:10px 0 6px;font-size:.92rem;color:#333}
    input[type="number"]{
      width:100%;box-sizing:border-box;
      padding:14px 12px;border-radius:14px;border:1px solid #d7dbe6;
      font-size:1.08rem;outline:none;background:#fff;
    }
    input[type="number"]:focus{border-color:#2f6bff;box-shadow:0 0 0 4px rgba(47,107,255,.14)}
    .row2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .options{
      margin-top:10px;
      padding:12px;border-radius:14px;background:#fafbff;border:1px solid #e6ebff;
      display:grid;gap:10px;
    }
    .optLine{display:flex;align-items:center;gap:10px;font-size:.95rem;color:#222}
    .optLine input{transform:scale(1.15)}
    .btns{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px}
    button{
      padding:14px 12px;border-radius:14px;border:0;
      font-size:1.02rem;font-weight:800;cursor:pointer;
    }
    .primary{background:#2f6bff;color:#fff}
    .secondary{background:#eef2ff;color:#2f6bff}
    .result{
      margin-top:14px;padding:14px;border-radius:16px;
      background:#f2f6ff;border:1px solid #dbe7ff;text-align:center;
      display:none;
    }
    .price{font-size:1.7rem;font-weight:900;margin-top:6px}
    .detail{font-size:.86rem;color:#666;line-height:1.35;margin-top:6px}
    .breakdown{
      margin-top:10px;
      display:grid; gap:6px;
      text-align:left;
      background:#fff;
      border:1px solid #dbe7ff;
      border-radius:14px;
      padding:10px 12px;
      font-size:.92rem;
      color:#222;
    }
    .line{display:flex;justify-content:space-between;gap:12px}
    .muted{color:#666}
  </style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>裱框費用計算</h1>
    <div class="sub">
      計價單位：每 <b>15 公分</b> 為一單位<br>
      框價 = <b>(總長度 cm ÷ 15) × 框單價</b><br>
      壓克力（可選）= <b>(總長度 cm ÷ 15) × 70</b>
    </div>

    <div class="row2">
      <div>
        <label for="L">長（cm）</label>
        <input id="L" type="number" inputmode="decimal" placeholder="例如 100">
      </div>
      <div>
        <label for="W">寬（cm）</label>
        <input id="W" type="number" inputmode="decimal" placeholder="例如 100">
      </div>
    </div>

    <label for="P">框的單價（每 15cm 的單價）</label>
    <input id="P" type="number" inputmode="decimal" placeholder="例如 80">

    <div class="options">
      <div class="optLine">
        <input id="mat" type="checkbox">
        <label for="mat" style="margin:0;">加卡板（每邊 3cm → 長寬各 +6cm）</label>
      </div>

      <div class="optLine">
        <input id="acrylic" type="checkbox">
        <label for="acrylic" style="margin:0;">
          加壓克力（單價固定 70 / 每 15cm）
        </label>
      </div>

      <div class="optLine" style="align-items:flex-start;">
        <div style="min-width:72px;font-weight:800;">總長度</div>
        <div style="display:grid;gap:6px;">
          <label class="optLine" style="margin:0;">
            <input type="radio" name="mode" value="sum" checked>
            用（長 + 寬）
          </label>
          <label class="optLine" style="margin:0;">
            <input type="radio" name="mode" value="perimeter">
            用周長 2×（長 + 寬）
          </label>
        </div>
      </div>
    </div>

    <div class="btns">
      <button class="primary" id="calcBtn">計算費用</button>
      <button class="secondary" id="resetBtn">清除</button>
    </div>

    <div class="result" id="resultBox">
      <div id="titleText">裱框費用</div>
      <div class="price" id="priceText">—</div>

      <div class="breakdown" id="breakdownBox" style="display:none;">
        <div class="line"><span class="muted">框價</span><span id="frameCost">—</span></div>
        <div class="line"><span class="muted">壓克力</span><span id="acrylicCost">—</span></div>
        <div class="line" style="font-weight:900;"><span>總計</span><span id="grandTotal">—</span></div>
      </div>

      <div class="detail" id="detailText"></div>
    </div>
  </div>
</div>

<script>
  const ACRYLIC_UNIT_PRICE = 70; // 壓克力固定單價（每 15cm）

  const el = (id) => document.getElementById(id);

  function getMode(){
    return [...document.querySelectorAll('input[name="mode"]')]
      .find(r => r.checked)?.value || "sum";
  }

  function calc(){
    let L = parseFloat(el("L").value);
    let W = parseFloat(el("W").value);
    const frameUnitPrice = parseFloat(el("P").value);

    if (Number.isNaN(L) || Number.isNaN(W) || Number.isNaN(frameUnitPrice)){
      alert("請輸入長、寬、框的單價");
      return;
    }

    // 卡板：每邊 3cm -> 長寬各 +6cm
    const matOn = el("mat").checked;
    if (matOn){
      L += 6;
      W += 6;
    }

    const mode = getMode();
    const totalCm = (mode === "perimeter") ? 2 * (L + W) : (L + W);

    const units = totalCm / 15;              // 15cm 計價單位（可小數）
    const frameCost = units * frameUnitPrice;

    const acrylicOn = el("acrylic").checked;
    const acrylicCost = acrylicOn ? (units * ACRYLIC_UNIT_PRICE) : 0;

    const grandTotal = frameCost + acrylicCost;

    el("resultBox").style.display = "block";
    el("breakdownBox").style.display = "block";

    el("frameCost").textContent = `${frameCost.toFixed(2)} 元`;
    el("acrylicCost").textContent = acrylicOn ? `${acrylicCost.toFixed(2)} 元` : `0.00 元`;
    el("grandTotal").textContent = `${grandTotal.toFixed(2)} 元`;

    el("titleText").textContent = "裱框費用（框 + 可選壓克力）";
    el("priceText").textContent = `${grandTotal.toFixed(2)} 元`;

    const baseNote = matOn ? "含卡板（長寬各 +6cm）" : "未加卡板";
    const modeNote = (mode === "perimeter") ? "周長 2×(長+寬)" : "(長+寬)";

    let detail = `${baseNote}｜總長度=${modeNote}=${totalCm.toFixed(2)}cm｜單位=${totalCm.toFixed(2)}/15=${units.toFixed(4)}｜框：${units.toFixed(4)}×${frameUnitPrice}=${frameCost.toFixed(2)}`;
    if (acrylicOn){
      detail += `｜壓克力：${units.toFixed(4)}×${ACRYLIC_UNIT_PRICE}=${acrylicCost.toFixed(2)}`;
    }
    el("detailText").textContent = detail;
  }

  function resetAll(){
    el("L").value = "";
    el("W").value = "";
    el("P").value = "";
    el("mat").checked = false;
    el("acrylic").checked = false;
    document.querySelector('input[name="mode"][value="sum"]').checked = true;
    el("resultBox").style.display = "none";
    el("breakdownBox").style.display = "none";
    el("L").focus();
  }

  el("calcBtn").addEventListener("click", calc);
  el("resetBtn").addEventListener("click", resetAll);

  // 方便：結果已顯示時，變更就自動重算
  ["L","W","P","mat","acrylic"].forEach(id => el(id).addEventListener("input", () => {
    if (el("resultBox").style.display === "block") calc();
  }));
  document.querySelectorAll('input[name="mode"]').forEach(r => r.addEventListener("change", () => {
    if (el("resultBox").style.display === "block") calc();
  }));
</script>
</body>
</html>
